"use strict";(self.webpackChunkdocs_reanimated=self.webpackChunkdocs_reanimated||[]).push([[9244],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>f});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},m=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),u=c(n),p=o,f=u["".concat(s,".").concat(p)]||u[p]||d[p]||r;return n?a.createElement(f,i(i({ref:t},m),{},{components:n})):a.createElement(f,i({ref:t},m))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:o,i[1]=l;for(var c=2;c<r;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},52497:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>k,contentTitle:()=>h,default:()=>N,frontMatter:()=>y,metadata:()=>b,toc:()=>w});var a=n(87462),o=n(67294),r=n(3905),i=n(67177),l=n(72400),s=n(28033),c=n(99435),m=n(10758),u=n(10919);const d=o.forwardRef(((e,t)=>o.createElement(i.Z,(0,a.Z)({ref:t},e)))),p=c.F(d);function f(){(0,o.useRef)(null);const e=(0,m.y)(100);return o.createElement(i.Z,{style:v.container},o.createElement(p,{style:{...v.box,width:e}}),o.createElement(l.Z,{onPress:()=>{e.value=(0,u.V)(e.value+50)},title:"Click me"}))}const v=s.Z.create({container:{flex:1,alignItems:"center"},box:{height:100,backgroundColor:"#b58df1",borderRadius:20,marginVertical:64}}),g="import React, { useRef } from 'react';\nimport { StyleSheet, View, Button, ViewProps } from 'react-native';\nimport Animated, { useSharedValue, withSpring } from 'react-native-reanimated';\n\nconst MyView = React.forwardRef(\n  (props: ViewProps, ref: React.LegacyRef<View>) => {\n    // some additional logic\n    return <View ref={ref} {...props} />;\n  }\n);\n\n// highlight-next-line\nconst MyAnimatedView = Animated.createAnimatedComponent(MyView);\n\nexport default function App() {\n  const ref = useRef<View | null>(null);\n  const width = useSharedValue(100);\n\n  const handlePress = () => {\n    width.value = withSpring(width.value + 50);\n  };\n\n  return (\n    <View style={styles.container}>\n      <MyAnimatedView style={{ ...styles.box, width }} />\n      <Button onPress={handlePress} title=\"Click me\" />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n  },\n  box: {\n    height: 100,\n    backgroundColor: '#b58df1',\n    borderRadius: 20,\n    marginVertical: 64,\n  },\n});\n",y={sidebar_position:6},h="createAnimatedComponent",b={unversionedId:"core/createAnimatedComponent",id:"core/createAnimatedComponent",title:"createAnimatedComponent",description:"createAnimatedComponent lets you create an Animated version of any React Native component. Wrapping a component with createAnimatedComponent allows Reanimated to animate any prop or style associated with that component.",source:"@site/docs/core/createAnimatedComponent.mdx",sourceDirName:"core",slug:"/core/createAnimatedComponent",permalink:"/react-native-reanimated/docs/core/createAnimatedComponent",draft:!1,editUrl:"https://github.com/software-mansion/react-native-reanimated/tree/main/packages/docs-reanimated/docs/core/createAnimatedComponent.mdx",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"useDerivedValue",permalink:"/react-native-reanimated/docs/core/useDerivedValue"},next:{title:"cancelAnimation",permalink:"/react-native-reanimated/docs/core/cancelAnimation"}},k={},w=[{value:"Reference",id:"reference",level:2},{value:"Arguments",id:"arguments",level:3},{value:"<code>component</code>",id:"component",level:4},{value:"Returns",id:"returns",level:3},{value:"Example",id:"example",level:2},{value:"Platform compatibility",id:"platform-compatibility",level:2}],C=(x="InteractiveExample",function(e){return console.warn("Component "+x+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",e)});var x;const P={toc:w},A="wrapper";function N(e){let{components:t,...n}=e;return(0,r.kt)(A,(0,a.Z)({},P,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"createanimatedcomponent"},"createAnimatedComponent"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"createAnimatedComponent")," lets you create an Animated version of any React Native component. Wrapping a component with ",(0,r.kt)("inlineCode",{parentName:"p"},"createAnimatedComponent")," allows Reanimated to animate any prop or style associated with that component."),(0,r.kt)("p",null,"Reanimated comes with five built-in Animated components:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Animated.FlatList")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Animated.Image")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Animated.View")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Animated.ScrollView")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Animated.Text"))),(0,r.kt)("p",null,"Rest of the components you might want to animate in React Native have to be wrapped with a ",(0,r.kt)("inlineCode",{parentName:"p"},"createAnimatedComponent")," function."),(0,r.kt)("h2",{id:"reference"},"Reference"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"import Animated from 'react-native-reanimated';\nimport { TextInput } from 'react-native';\n\nconst AnimatedTextInput = Animated.createAnimatedComponent(TextInput);\n")),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Type definitions"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"function createAnimatedComponent<P extends object>(\n  component: ComponentClass<P>\n): ComponentClass<AnimateProps<P>>;\n\nfunction createAnimatedComponent<P extends object>(\n  component: FunctionComponent<P>\n): FunctionComponent<AnimateProps<P>>;\n"))),(0,r.kt)("h3",{id:"arguments"},"Arguments"),(0,r.kt)("h4",{id:"component"},(0,r.kt)("inlineCode",{parentName:"h4"},"component")),(0,r.kt)("p",null,"The component you want to make animatable. Function components have to be wrapped with ",(0,r.kt)("inlineCode",{parentName:"p"},"React.forwardRef()"),"."),(0,r.kt)("h3",{id:"returns"},"Returns"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"createAnimatedComponent")," returns a component that Reanimated is capable of animating."),(0,r.kt)("h2",{id:"example"},"Example"),(0,r.kt)(C,{src:g,component:f,showCode:!0,mdxType:"InteractiveExample"}),(0,r.kt)("h2",{id:"platform-compatibility"},"Platform compatibility"),(0,r.kt)("div",{className:"platform-compatibility"},(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Android"),(0,r.kt)("th",{parentName:"tr",align:null},"iOS"),(0,r.kt)("th",{parentName:"tr",align:null},"Web"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705"))))))}N.isMDXComponent=!0},10919:(e,t,n)=>{n.d(t,{V:()=>r});var a=n(76933);function o(e,t,n){if(t.skipAnimation)return 0;const{stiffness:a,dampingRatio:o,restSpeedThreshold:r,duration:i}=t;return function(e){let{min:t,max:n,func:a,maxIterations:o=20}=e,r=o,i=(n+t)/2;for(;Math.abs(a(i))>5e-5&&r>0;)r-=1,a(i)<0?t=i:n=i,i=(t+n)/2;return i}({min:0,max:100,func:t=>{const l=(t*n*n+a*e*e)/(Math.exp(1-.5*o)*a);return-2*t/(2*o*Math.sqrt(a*t))*1e3*Math.log(.01*r/l)-i}})}const r=(e,t,n)=>(0,a.oF)(e,(()=>{const r={...{damping:10,mass:1,stiffness:100,overshootClamping:!1,restDisplacementThreshold:.01,restSpeedThreshold:2,velocity:0,duration:2e3,dampingRatio:.5,reduceMotion:void 0,clamp:void 0},...t,useDuration:!!(null!=t&&t.duration||null!=t&&t.dampingRatio),skipAnimation:!1};return r.skipAnimation=!function(e){var t,n;let a="";return["stiffness","damping","dampingRatio","restDisplacementThreshold","restSpeedThreshold","mass"].forEach((t=>{const n=e[t];n<=0&&(a+=`, ${t} must be grater than zero but got ${n}`)})),e.duration<0&&(a+=`, duration can't be negative, got ${e.duration}`),null!==(t=e.clamp)&&void 0!==t&&t.min&&null!==(n=e.clamp)&&void 0!==n&&n.max&&e.clamp.min>e.clamp.max&&(a+=`, clamp.min should be lower than clamp.max, got clamp: {min: ${e.clamp.min}, max: ${e.clamp.max}} `),""!==a&&console.warn("[Reanimated] Invalid spring config"+a),""===a}(r),0===r.duration&&(r.skipAnimation=!0),{onFrame:function(e,t){const{toValue:n,startTimestamp:a,current:o}=e,i=t-a;if(r.useDuration&&i>=r.duration)return e.current=n,e.lastTimestamp=0,!0;if(r.skipAnimation)return e.current=n,e.lastTimestamp=0,!0;const{lastTimestamp:l,velocity:s}=e,c=Math.min(t-l,64);e.lastTimestamp=t;const m=c/1e3,u=-s,d=n-o,{zeta:p,omega0:f,omega1:v}=e,{position:g,velocity:y}=p<1?function(e,t){const{toValue:n,current:a,velocity:o}=e,{zeta:r,t:i,omega0:l,omega1:s}=t,c=-o,m=n-a,u=Math.sin(s*i),d=Math.cos(s*i),p=Math.exp(-r*l*i),f=p*(u*((c+r*l*m)/s)+m*d);return{position:n-f,velocity:r*l*f-p*(d*(c+r*l*m)-s*m*u)}}(e,{zeta:p,v0:u,x0:d,omega0:f,omega1:v,t:m}):function(e,t){const{toValue:n}=e,{v0:a,x0:o,omega0:r,t:i}=t,l=Math.exp(-r*i);return{position:n-l*(o+(a+r*o)*i),velocity:l*(a*(i*r-1)+i*o*r*r)}}(e,{v0:u,x0:d,omega0:f,t:m});e.current=g,e.velocity=y;const{isOvershooting:h,isVelocity:b,isDisplacement:k}=function(e,t){const{toValue:n,velocity:a,startValue:o,current:r}=e;return{isOvershooting:!!t.overshootClamping&&(r>n&&o<n||r<n&&o>n),isVelocity:Math.abs(a)<t.restSpeedThreshold,isDisplacement:Math.abs(n-r)<t.restDisplacementThreshold}}(e,r),w=h||b&&k;return!(r.useDuration||!w)&&(e.velocity=0,e.current=n,e.lastTimestamp=0,!0)},onStart:function(e,t,n,a){e.current=t,e.startValue=t;let i=r.mass;const l=function(e,t){return(null==e?void 0:e.lastTimestamp)&&(null==e?void 0:e.startTimestamp)&&(null==e?void 0:e.toValue)===t.toValue&&(null==e?void 0:e.duration)===t.duration&&(null==e?void 0:e.dampingRatio)===t.dampingRatio}(a,e),s=r.duration,c=l?null==a?void 0:a.startValue:Number(e.toValue)-t;if(e.velocity=a?(l?null==a?void 0:a.velocity:(null==a?void 0:a.velocity)+r.velocity)||0:r.velocity||0,l)e.zeta=(null==a?void 0:a.zeta)||0,e.omega0=(null==a?void 0:a.omega0)||0,e.omega1=(null==a?void 0:a.omega1)||0;else{if(r.useDuration){const t=l?s-(((null==a?void 0:a.lastTimestamp)||0)-((null==a?void 0:a.startTimestamp)||0)):s;r.duration=t,i=o(c,r,e.velocity)}const{zeta:t,omega0:n,omega1:m}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;if(t.skipAnimation)return{zeta:0,omega0:0,omega1:0};if(t.useDuration){const{stiffness:n,dampingRatio:a}=t,o=Math.sqrt(n/e);return{zeta:a,omega0:o,omega1:o*Math.sqrt(1-a**2)}}{const{damping:e,mass:n,stiffness:a}=t,o=e/(2*Math.sqrt(a*n)),r=Math.sqrt(a/n);return{zeta:o,omega0:r,omega1:r*Math.sqrt(1-o**2)}}}(i,r);e.zeta=t,e.omega0=n,e.omega1=m,void 0!==r.clamp&&(e.zeta=function(e,t){const{zeta:n,toValue:a,startValue:o}=e,r=Number(a);if(r===o)return n;const[i,l]=r-o>0?[t.min,t.max]:[t.max,t.min],s=void 0!==l?Math.abs((l-r)/(r-o)):void 0,c=void 0!==i?Math.abs((i-r)/(r-o)):void 0,m=[void 0!==s?Math.abs(Math.log(s)/Math.PI):void 0,void 0!==c?Math.abs(Math.log(c)/(2*Math.PI)):void 0].filter((e=>void 0!==e));return Math.max(...m,n)}(e,r.clamp))}e.lastTimestamp=(null==a?void 0:a.lastTimestamp)||n,e.startTimestamp=l&&(null==a?void 0:a.startTimestamp)||n},toValue:e,velocity:r.velocity||0,current:e,startValue:0,callback:n,lastTimestamp:0,startTimestamp:0,zeta:0,omega0:0,omega1:0,reduceMotion:(0,a.uh)(r.reduceMotion)}}))},72400:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(67294),o=n(28033),r=n(88548),i=n(24404),l=a.forwardRef(((e,t)=>{var n=e.accessibilityLabel,o=e.color,l=e.disabled,c=e.onPress,m=e.testID,u=e.title;return a.createElement(r.Z,{accessibilityLabel:n,accessibilityRole:"button",disabled:l,focusable:!l,onPress:c,ref:t,style:[s.button,o&&{backgroundColor:o},l&&s.buttonDisabled],testID:m},a.createElement(i.Z,{style:[s.text,l&&s.textDisabled]},u))}));l.displayName="Button";var s=o.Z.create({button:{backgroundColor:"#2196F3",borderRadius:2},text:{color:"#fff",fontWeight:"500",padding:8,textAlign:"center",textTransform:"uppercase"},buttonDisabled:{backgroundColor:"#dfdfdf"},textDisabled:{color:"#a1a1a1"}});const c=l},88548:(e,t,n)=>{n.d(t,{Z:()=>f});var a=n(87462),o=n(63366),r=n(67294),i=n(16528),l=n(94119),s=n(28033),c=n(67177),m=["activeOpacity","delayPressIn","delayPressOut","delayLongPress","disabled","focusable","onLongPress","onPress","onPressIn","onPressOut","rejectResponderTermination","style"];function u(e,t){var n=e.activeOpacity,s=e.delayPressIn,u=e.delayPressOut,p=e.delayLongPress,f=e.disabled,v=e.focusable,g=e.onLongPress,y=e.onPress,h=e.onPressIn,b=e.onPressOut,k=e.rejectResponderTermination,w=e.style,C=(0,o.Z)(e,m),x=(0,r.useRef)(null),P=(0,i.Z)(t,x),A=(0,r.useState)("0s"),N=A[0],T=A[1],R=(0,r.useState)(null),M=R[0],V=R[1],O=(0,r.useCallback)(((e,t)=>{V(e),T(t?t/1e3+"s":"0s")}),[V,T]),D=(0,r.useCallback)((e=>{O(null!=n?n:.2,e)}),[n,O]),E=(0,r.useCallback)((e=>{O(null,e)}),[O]),S=(0,r.useMemo)((()=>({cancelable:!k,disabled:f,delayLongPress:p,delayPressStart:s,delayPressEnd:u,onLongPress:g,onPress:y,onPressStart(e){var t=null!=e.dispatchConfig?"onResponderGrant"===e.dispatchConfig.registrationName:"keydown"===e.type;D(t?0:150),null!=h&&h(e)},onPressEnd(e){E(250),null!=b&&b(e)}})),[p,s,u,f,g,y,h,b,k,D,E]),j=(0,l.Z)(x,S);return r.createElement(c.Z,(0,a.Z)({},C,j,{accessibilityDisabled:f,focusable:!f&&!1!==v,pointerEvents:f?"none":void 0,ref:P,style:[d.root,!f&&d.actionable,w,null!=M&&{opacity:M},{transitionDuration:N}]}))}var d=s.Z.create({root:{transitionProperty:"opacity",transitionDuration:"0.15s",userSelect:"none"},actionable:{cursor:"pointer",touchAction:"manipulation"}}),p=r.memo(r.forwardRef(u));p.displayName="TouchableOpacity";const f=p}}]);